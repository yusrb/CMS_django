{% extends "layouts/base.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "admin/css/changelists.css" %}">
    {% if cl.formset %}
        <link rel="stylesheet" type="text/css" href="{% static "css/forms.css" %}">
    {% endif %}
    {% if cl.formset or action_form %}
        <script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>
    {% endif %}
    {{ media.css }}
    <style>
        @media (max-width: 768px) {
            .table-settings {
                flex-direction: column;
                align-items: flex-start;
            }
            .table-settings .col {
                margin-bottom: 1rem;
            }
            #changelist table {
                font-size: 14px;
            }
            #changelist table thead th,
            #changelist table tbody td {
                word-break: break-word;
            }
        }

        @media (max-width: 480px) {
            .table-wrapper {
                overflow-x: scroll;
            }
            .btn-toolbar {
                justify-content: flex-start;
                gap: 0.5rem;
            }
            #changelist table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }
    </style>
{% endblock %}

{% block extrahead %}
    {{ block.super }}
    {{ media.js }}
{% endblock %}

{% block overlay %}
    <div class="min-height-300 position-absolute bg-primary w-100"></div>
{% endblock overlay %}

{% block content %}
    <div class="table-settings mb-4 mx-3 d-flex align-items-center justify-content-between">
        <div class="col-md-8 col-12">
            {% block search %}{% search_form cl %}{% endblock %}
        </div>
        <div class="d-flex justify-content-end mt-2 col-md-4 col-12">
            <div class="btn-toolbar mb-2">
                {% block object-tools-items %}
                    {% change_list_object_tools %}
                {% endblock %}
            </div>
        </div>
    </div>

    <div class="row mx-2">
        <div class="{% if cl.has_filters %}col-md-10{% else %}col-md-12{% endif %} col-12">
            {% block date_hierarchy %}
                {% if cl.date_hierarchy %}{% date_hierarchy cl %}{% endif %}
            {% endblock %}
            <form id="changelist-form" method="post" {% if cl.formset and cl.formset.is_multipart %}
                  enctype="multipart/form-data"{% endif %} novalidate>
                {% csrf_token %}

                {% if cl.formset %}
                    <div>{{ cl.formset.management_form }}</div>
                {% endif %}

                <div class="card card-body border-0 shadow table-wrapper">
                    {% block result_list %}
                        {% if action_form and actions_on_top and cl.show_admin_actions %}
                            {% admin_actions %}
                        {% endif %}

                        {% result_list cl %}

                        {% if action_form and actions_on_bottom and cl.show_admin_actions %}
                            {% admin_actions %}
                        {% endif %}
                    {% endblock %}

                    {% block pagination %}{% pagination cl %}{% endblock %}
                </div>
            </form>
        </div>
    </div>
{% endblock %}